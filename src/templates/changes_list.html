<% if (!diffs.length) { %>
<p>No changes from dataset.</p>
<% } else { %>
<%
var description = diffs.asDescription();
var _ = require('underscore');
%>
<h3>Total changes: <%= diffs.length %></h3>

<hr />

<% if (description.periodCollection.add.length) { %>
<h4>New period collections</h4>
<div>
  <input type="checkbox" class="select-all-patches" />
  <label>Select all</label>
</div>
<table class="table">
  <tbody>
  <% description.periodCollection.add.forEach(function (cid) { %>
  <%
    var patch = diffs.get(cid);
    var template = require('./changes/period_collection_add.html');
  %>

  <%= template({ patch: patch }) %>
  <% }); %>
  </tbody>
</table>
<% } %>

<% if (description.periodCollection.remove.length) { %>
<h4>Deleted period collections</h4>
<% description.periodCollection.remove.forEach(function (cid) { %>
<%
  var patch = diffs.get(cid);
%>
<% }); %>
<% } %>

<% if (!_.isEmpty(description.periodCollection.edit)) { %>
<h4>Edited period collections</h4>
<% } %>

<% if (description.period.add.length) { %>
<h4>New periods</h4>
<% } %>

<% if (description.period.remove.length) { %>
<h4>Deleted periods</h4>
<% } %>

<% if (!_.isEmpty(description.period.edit)) { %>
<h4>Edited periods</h4>
<% } %>

<% } %>

<hr/>
<button id="js-accept-patches" class="btn btn-primary">Apply selected changes</button>
